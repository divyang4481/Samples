var SinglePageApps;(function(){ko.bindingHandlers.datetext={init:function(n,t,i){var f=t(),o=i(),e=i.dateFormat||"M/D/YYYY",r=ko.utils.unwrapObservable(f),u;r&&(moment(r).year()>1970?(u=moment(r).format(e),$(n).text(u)):$(n).text("-"))},update:function(n,t,i){var f=t(),o=i(),e=i.dateFormat||"M/D/YYYY",r=ko.utils.unwrapObservable(f),u;r&&(moment(r).year()>1970?(u=moment(r).format(e),$(n).text(u)):$(n).text("-"))}};var t=function(){function n(n,t,i){this.Id=n,this.Name=t,this.Mails=i}return n}(),i=function(){function n(n,t,i,r,u,f,e){this.Id=n,this.From=t,this.To=i,this.Subject=r,this.Date=u,this.FolderId=f,this.MessageContent=e}return n}(),n=function(){function n(){var t=this,n;this.chosenFolderId=ko.observable(),this.chosenFolderData=ko.observable(),this.chosenMailData=ko.observable(),n=this,Sammy(function(){this.get("#:folder",function(){n.chosenFolderId(this.params.folder),n.chosenMailData(null),$.get("/Folder/Get",{id:this.params.folder},n.chosenFolderData)}),this.get("#:folder/:mailId",function(){n.chosenFolderId(this.params.folder),n.chosenFolderData(null),$.get("/Mail/Get",{id:this.params.mailId},n.chosenMailData)}),this.get("",function(){this.app.runRoute("get","#1")})}).run(),$.ajax("/Folder",{async:!1}).done(function(n){t.folders=n}),this.goToFolder=function(n){location.hash=n.Id.toString()},this.goToMail=function(n){location.hash=n.FolderId+"/"+n.Id}}return n}();$(function(){ko.applyBindings(new n)})})(SinglePageApps||(SinglePageApps={}))